<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="401px" preserveAspectRatio="none" style="width:306px;height:401px;background:#777777;" version="1.1" viewBox="0 0 306 401" width="306px" zoomAndPan="magnify"><defs><filter height="300%" id="f12g967th7q96e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[0ba5ee7700168656dc1b457c6fe9fdac]
entity Client--><rect fill="#556B2F" filter="url(#f12g967th7q96e)" height="33.3687" style="stroke: #1B1B1B; stroke-width: 1.5;" width="53" x="6" y="37"/><text fill="#FFFFFF" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="16" y="58.0591">Client</text><!--MD5=[6754354365917abf8f1a56af1b7e344c]
class Context--><rect fill="#2E2E2E" filter="url(#f12g967th7q96e)" height="90.5874" id="Context" style="stroke: #1B1B1B; stroke-width: 1.5;" width="106" x="94.5" y="8"/><ellipse cx="106.5" cy="26.0867" fill="#BB6600" rx="8" ry="8" style="stroke: #1B1B1B; stroke-width: 1.0;"/><path d="M107.1406,30.2429 Q106.25,30.2429 105.4844,29.9773 Q104.7344,29.7117 104.1875,29.196 Q103.6563,28.6804 103.3438,27.8992 Q103.0469,27.1179 103.0469,26.1023 Q103.0469,25.1492 103.3281,24.3835 Q103.625,23.6023 104.1719,23.0398 Q104.6875,22.5085 105.4531,22.2273 Q106.2344,21.9304 107.1406,21.9304 Q107.6406,21.9304 108.0469,21.9929 Q108.4531,22.0398 108.7969,22.1335 Q109.1563,22.2429 109.4531,22.3679 Q109.75,22.4929 109.9688,22.6023 L109.9688,24.5398 L109.7344,24.5398 Q109.5781,24.4148 109.3438,24.2429 Q109.125,24.0554 108.8281,23.8835 Q108.5313,23.7117 108.1875,23.6023 Q107.8438,23.4773 107.4531,23.4773 Q107.0156,23.4773 106.625,23.6179 Q106.2344,23.7429 105.9063,24.071 Q105.5938,24.3679 105.3906,24.8835 Q105.2031,25.3835 105.2031,26.1023 Q105.2031,26.8523 105.4063,27.3679 Q105.625,27.8679 105.9375,28.1492 Q106.2656,28.446 106.6719,28.571 Q107.0781,28.696 107.4688,28.696 Q107.8438,28.696 108.2031,28.5867 Q108.5781,28.4773 108.8906,28.2742 Q109.1563,28.1335 109.375,27.9617 Q109.6094,27.7742 109.75,27.6492 L109.9688,27.6492 L109.9688,29.5554 Q109.6719,29.696 109.3906,29.821 Q109.125,29.9304 108.8125,30.0085 Q108.4219,30.1179 108.0781,30.1804 Q107.7344,30.2429 107.1406,30.2429 Z "/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="84" x="115.5" y="23.2104">«ATMMachine»</text><text fill="#FFFFFF" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="45" x="135" y="36.8638">Context</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="95.5" x2="199.5" y1="44.1733" y2="44.1733"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="102.5" y="52.1733"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="67" x="111.5" y="58.3838">State state;</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="95.5" x2="199.5" y1="64.978" y2="64.978"/><ellipse cx="105.5" cy="75.978" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="56" x="111.5" y="79.1885">request();</text><ellipse cx="105.5" cy="88.7827" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="65" x="111.5" y="91.9932">set_state();</text><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><rect fill="#2E2E2E" filter="url(#f12g967th7q96e)" height="90.5874" id="State" style="stroke: #1B1B1B; stroke-width: 1.5;" width="118" x="88.5" y="174"/><ellipse cx="113.55" cy="192.0867" fill="#A9DCDF" rx="8" ry="8" style="stroke: #1B1B1B; stroke-width: 1.0;"/><path d="M117.4563,195.5867 L115.3313,195.5867 L114.7688,193.9773 L111.8156,193.9773 L111.2531,195.5867 L109.175,195.5867 L112.1281,187.5867 L114.5031,187.5867 L117.4563,195.5867 Z M114.2688,192.5085 L113.3,189.6335 L112.3156,192.5085 L114.2688,192.5085 Z "/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="67" x="125.45" y="189.2104">«ATMState»</text><text fill="#FFFFFF" font-family="Verdana" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="29" x="144.45" y="202.8638">State</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="89.5" x2="205.5" y1="210.1733" y2="210.1733"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="96.5" y="218.1733"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="105.5" y="224.3838">Context context;</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="89.5" x2="205.5" y1="230.978" y2="230.978"/><ellipse cx="99.5" cy="241.978" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="105.5" y="245.1885">State(Context *);</text><ellipse cx="99.5" cy="254.7827" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="105.5" y="257.9932">handle();</text><!--MD5=[35b623038f040a656a74fdab6cf50ab7]
class ConcreateStateA--><rect fill="#2E2E2E" filter="url(#f12g967th7q96e)" height="64.978" id="ConcreateStateA" style="stroke: #1B1B1B; stroke-width: 1.5;" width="123" x="7" y="326"/><ellipse cx="19" cy="344.0867" fill="#BB6600" rx="8" ry="8" style="stroke: #1B1B1B; stroke-width: 1.0;"/><path d="M19.6406,348.2429 Q18.75,348.2429 17.9844,347.9773 Q17.2344,347.7117 16.6875,347.196 Q16.1563,346.6804 15.8438,345.8992 Q15.5469,345.1179 15.5469,344.1023 Q15.5469,343.1492 15.8281,342.3835 Q16.125,341.6023 16.6719,341.0398 Q17.1875,340.5085 17.9531,340.2273 Q18.7344,339.9304 19.6406,339.9304 Q20.1406,339.9304 20.5469,339.9929 Q20.9531,340.0398 21.2969,340.1335 Q21.6563,340.2429 21.9531,340.3679 Q22.25,340.4929 22.4688,340.6023 L22.4688,342.5398 L22.2344,342.5398 Q22.0781,342.4148 21.8438,342.2429 Q21.625,342.0554 21.3281,341.8835 Q21.0313,341.7117 20.6875,341.6023 Q20.3438,341.4773 19.9531,341.4773 Q19.5156,341.4773 19.125,341.6179 Q18.7344,341.7429 18.4063,342.071 Q18.0938,342.3679 17.8906,342.8835 Q17.7031,343.3835 17.7031,344.1023 Q17.7031,344.8523 17.9063,345.3679 Q18.125,345.8679 18.4375,346.1492 Q18.7656,346.446 19.1719,346.571 Q19.5781,346.696 19.9688,346.696 Q20.3438,346.696 20.7031,346.5867 Q21.0781,346.4773 21.3906,346.2742 Q21.6563,346.1335 21.875,345.9617 Q22.1094,345.7742 22.25,345.6492 L22.4688,345.6492 L22.4688,347.5554 Q22.1719,347.696 21.8906,347.821 Q21.625,347.9304 21.3125,348.0085 Q20.9219,348.1179 20.5781,348.1804 Q20.2344,348.2429 19.6406,348.2429 Z "/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="85" x="36" y="341.2104">«NoCardState»</text><text fill="#FFFFFF" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="30" y="354.8638">ConcreateStateA</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="8" x2="129" y1="362.1733" y2="362.1733"/><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="8" x2="129" y1="370.1733" y2="370.1733"/><ellipse cx="18" cy="381.1733" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="24" y="384.3838">handle();</text><!--MD5=[d58c9e932431bb6961b2aa3b0e6dfa3d]
class ConcreateStateB--><rect fill="#2E2E2E" filter="url(#f12g967th7q96e)" height="64.978" id="ConcreateStateB" style="stroke: #1B1B1B; stroke-width: 1.5;" width="123" x="165" y="326"/><ellipse cx="177" cy="344.0867" fill="#BB6600" rx="8" ry="8" style="stroke: #1B1B1B; stroke-width: 1.0;"/><path d="M177.6406,348.2429 Q176.75,348.2429 175.9844,347.9773 Q175.2344,347.7117 174.6875,347.196 Q174.1563,346.6804 173.8438,345.8992 Q173.5469,345.1179 173.5469,344.1023 Q173.5469,343.1492 173.8281,342.3835 Q174.125,341.6023 174.6719,341.0398 Q175.1875,340.5085 175.9531,340.2273 Q176.7344,339.9304 177.6406,339.9304 Q178.1406,339.9304 178.5469,339.9929 Q178.9531,340.0398 179.2969,340.1335 Q179.6563,340.2429 179.9531,340.3679 Q180.25,340.4929 180.4688,340.6023 L180.4688,342.5398 L180.2344,342.5398 Q180.0781,342.4148 179.8438,342.2429 Q179.625,342.0554 179.3281,341.8835 Q179.0313,341.7117 178.6875,341.6023 Q178.3438,341.4773 177.9531,341.4773 Q177.5156,341.4773 177.125,341.6179 Q176.7344,341.7429 176.4063,342.071 Q176.0938,342.3679 175.8906,342.8835 Q175.7031,343.3835 175.7031,344.1023 Q175.7031,344.8523 175.9063,345.3679 Q176.125,345.8679 176.4375,346.1492 Q176.7656,346.446 177.1719,346.571 Q177.5781,346.696 177.9688,346.696 Q178.3438,346.696 178.7031,346.5867 Q179.0781,346.4773 179.3906,346.2742 Q179.6563,346.1335 179.875,345.9617 Q180.1094,345.7742 180.25,345.6492 L180.4688,345.6492 L180.4688,347.5554 Q180.1719,347.696 179.8906,347.821 Q179.625,347.9304 179.3125,348.0085 Q178.9219,348.1179 178.5781,348.1804 Q178.2344,348.2429 177.6406,348.2429 Z "/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="52" x="210.5" y="341.2104">«HasPin»</text><text fill="#FFFFFF" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="188" y="354.8638">ConcreateStateB</text><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="166" x2="287" y1="362.1733" y2="362.1733"/><line style="stroke: #1B1B1B; stroke-width: 1.5;" x1="166" x2="287" y1="370.1733" y2="370.1733"/><ellipse cx="176" cy="381.1733" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#AAAAAA" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="182" y="384.3838">handle();</text><!--MD5=[b67765e92eb1888ae5b1de0c9c20f931]
link Client to Context--><path d="M59,53.5 C69.01,53.5 79.02,53.5 89.03,53.5 " fill="none" id="Client-&gt;Context" style="stroke: #FFFFFF; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="94.26,53.5,85.26,49.5,89.26,53.5,85.26,57.5,94.26,53.5" style="stroke: #FFFFFF; stroke-width: 1.0;"/><!--MD5=[64495b8fbf9e79a080f449d41e5a6213]
link Context to State--><path d="M96.57,99.21 C89.19,108.28 82.68,118.33 78.5,129 C72.9,143.28 77.16,157.18 85.77,169.61 " fill="none" id="Context-&gt;State" style="stroke: #FFFFFF; stroke-width: 1.0;"/><polygon fill="#FFFFFF" points="88.85,173.76,86.7047,164.1476,85.8728,169.743,80.2775,168.9111,88.85,173.76" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#BBBBBB" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="79.5" y="141.0591">state-&gt;handle()</text><!--MD5=[fe330d2675cef5d36e0874385a012d03]
link State to Context--><path d="M166.5,173.88 C169.82,164.2 172.76,153.89 174.5,144 C176.8,130.88 174.85,116.96 171.14,104.12 " fill="none" id="State-&gt;Context" style="stroke: #FFFFFF; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="169.57,99.07,168.4183,108.8513,171.0524,103.8452,176.0585,106.4794,169.57,99.07" style="stroke: #FFFFFF; stroke-width: 1.0;"/><text fill="#BBBBBB" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="176.5" y="141.0591">context-&gt;set_state()</text><!--MD5=[30061fef2a2759666f1c5bd96a5ec7bc]
reverse link State to ConcreateStateA--><path d="M111.4,283.11 C102.83,297.97 94.04,313.21 86.67,325.99 " fill="none" id="State&lt;-ConcreateStateA" style="stroke: #FFFFFF; stroke-width: 1.0;"/><polygon fill="none" points="105.58,279.19,121.63,265.36,117.71,286.18,105.58,279.19" style="stroke: #FFFFFF; stroke-width: 1.0;"/><!--MD5=[21b934b5d74a0249dd3c0959c97599f9]
reverse link State to ConcreateStateB--><path d="M183.6,283.11 C192.17,297.97 200.96,313.21 208.33,325.99 " fill="none" id="State&lt;-ConcreateStateB" style="stroke: #FFFFFF; stroke-width: 1.0;"/><polygon fill="none" points="177.29,286.18,173.37,265.36,189.42,279.19,177.29,286.18" style="stroke: #FFFFFF; stroke-width: 1.0;"/><!--MD5=[3edafb1d527cbf54a79c6cdd4c15c35b]
@startuml state_pattern

!define DARKORANGE
!includeurl https://raw.githubusercontent.com/Drakemor/RedDress-PlantUML/master/style.puml

allow_mixing
rectangle Client #DarkOliveGreen

class Context <<ATMMachine>> {
    - State state;
    + request();
    + set_state();
}

abstract class State <<ATMState>> {
    - Context context;
    + State(Context *);
    + {abstract} handle();
}

class ConcreateStateA <<NoCardState>> {
    + handle();
}

class ConcreateStateB <<HasPin>> {
    + handle();
}

Client -right-> Context
Context - -> State : state->handle()
State ..> Context : context->set_state()
State <|- - ConcreateStateA
State <|- - ConcreateStateB

@enduml

@startuml state_pattern










skinparam stereotypeCBackgroundColor BB6600



skinparam backgroundColor 777







skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Verdana
}

skinparam class {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11

  attributeFontColor aaa
  attributeFontSize 11
  attributeIconSize 11
}


skinparam actor {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor 575757
  borderColor 767676
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}


skinparam interface {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam node {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam database {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam queue {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11
}

skinparam activity {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11
}

skinparam sequence {
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11

  lifeLineBorderColor BB6600
  lifeLineBackgroundColor 575757
}

skinparam boundary {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam control {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam entity {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}


skinparam state {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11
  startColor BB6600
  endColor 662200
}


skinparam object {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11
}


skinparam note {
    backgroundColor BB6600
  borderColor 662200
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam cloud {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
    arrowColor fff
  arrowFontName Verdana
  arrowFontColor bbb
  arrowFontSize 11
}

skinparam rectangle {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}

skinparam storage {
    backgroundColor 2e2e2e
  borderColor 1b1b1b
    fontColor fff
  fontName Verdana
  fontSize 11
  stereotypeFontColor aaa
  stereotypeFontSize 11
}


allow_mixing
rectangle Client #DarkOliveGreen

class Context <<ATMMachine>> {
    - State state;
    + request();
    + set_state();
}

abstract class State <<ATMState>> {
    - Context context;
    + State(Context *);
    + {abstract} handle();
}

class ConcreateStateA <<NoCardState>> {
    + handle();
}

class ConcreateStateB <<HasPin>> {
    + handle();
}

Client -right-> Context
Context - -> State : state->handle()
State ..> Context : context->set_state()
State <|- - ConcreateStateA
State <|- - ConcreateStateB

@enduml

PlantUML version 1.2020.10(Sun May 17 15:05:57 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.8+10-post-Ubuntu-0ubuntu120.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>